# 测试用例模板

[TOC]

## 1. 测试方案

### 1.1 测试基础

**测试目标**

可靠性测试、可用性测试、兼容性测试、安装测试、恢复测试、安全性测试、性能测试、负载测试、功能测试、国际化测试、本地化测试

**测试方法**

- 白盒方法：代码审查、语句覆盖、判定覆盖、条件覆盖、组合覆盖、基本路径、形式化方法、符号执行
- 黑盒方法：Ad-hoc法、功能图、错误推测法、因果图法、边界值分析、等价类规划、决策树

**测试阶段**

单元测试、集成测试、系统测试、验收测试

### 1.2 测试要求

研发测试工作要包含：在`单元测试`和`集成测试`阶段，通过`白盒测试`方法进行`功能测试`、`性能测试`、`可靠性测试`、`兼容性测试`、`安全性测试`等。

==单元测试==在Maven编译时进行测试，测试不依赖于具体的环境（比如数据库等）。

==集成测试==通过Jenkins编译完成时候，自动部署服务器，所有环境试使用真实的环境。

集成测试在未完成自动测试之前暂时通过手动测试，本次此时用例主要针对集成测试阶段的功能测试、性能测试。


## 2. API功能测试

测试用例要：

1. 遍历所有参数，包括参数边界、异常参数等。
2. 遍历所有前置条件，比如项目中设备为空、设备离线、用户权限为操作员等。
3. 尽可能覆盖代码分支

以`getTopology`接口为例，基本测试用例包含：

1. projectId为空、非数字、数字大于long时，projectId和Account没有绑定关系。
2. filterAnd字段为空、deviceMac值为当前Project下的MAC、deviceMac为未非MAC地址、deviceMac值为非当前project下的MAC、包含其他未知key（包含deviceMac和不包含deviceMac，key中有特殊字符）。
3. isForceRefresh为true、false、其他类型值、值为true并且角色为操作员。
4. 设备数超过1000
5. 项目第一次获取拓扑数据、后台正在更新（强制/非强制）

考虑设备情况，需要增加测试用例：

1. 设备包含AC、Fit AP、Fat AP、Switch（新旧设备）、WVR、ER、开启LLDP的第三方设备、未开启LLDP的第三方设备
2. 交换机端口以LAG相连、开启MSTP环形相连、设备不同的VLAN环形相连
3. AP从一台AC转移到另外一台AC
4. AP中包含旧设备
5. 设备中手动关闭LLDP

考虑后台处理，需要增加测试用例：

1. 多个Project同时请求刷新。
2. 设备数量大于1000时刷新拓扑

## 3. Web前端功能测试

前端测试用例包括：

1. 遍历获取的数据各种情况
2. Form表单检查所有的输入参数
3. 遍历所有操作逻辑

以`项目列表`为例，测试用例包含：

1. 项目名称为空、包含特殊字符（"<>\,emoji"等）
2. 项目数超过1000个
3. 项目切换时刷新界面
4. 编辑项目名称时，为空、不变、长度超过256字符、有特殊字符的情况
5. 删除项目

包含友好性测试（Check）：

1. 输入框对Enter、Esc的响应
2. 打开编辑框自动Focus并Select All

## 4. 测试记录

统一按照如下项填写（[]内为可选列）：

| 测试类型                                               | 测试模块 | 测试目的 | 测试内容 | [测试拓扑] | 测试设置       | 测试输入         | 测试输出 | 结果 | 备注 |
| ------------------------------------------------------ | -------- | -------- | -------- | ---------- | -------------- | ---------------- | -------- | ---- | ---- |
| 功能测试、性能测试、兼容性测试、可靠性测试、安全性测试 | 模块名称 |          |          |  | 测试的前置条件 | 测试的详细步骤 | 针对测试输入的输出结果，和输入对应，可以 没有 | PASS/FAIL |      |
| 功能测试 | 拓扑后台模块 | getTopology接口参数校验 | 用postman向getTopology接口输入不同参数 |  | 1. 用户为操作员<br />2. 数据库中包含拓扑数据<br />3. 服务器没有在更新该项目 | 1. projectId为空<br />2. projectId为非数字字符串<br />3. projectId大于long<br />4.。。。 | 1-4. 返回参数错误 | PASS ||
| 功能测试 |拓扑后台模块|getTopology权限校验|用postman向getTopology接口发送请求||1. 用户为操作员|1. projectId和用户没有绑定<br />2. project中用户为操作员<br />3. filterAnd中MAC和Project没有绑定|1-2. 返回ACCOUNT NO SITE PERMISSION ERROR错误码<br />3. 返回空|||

